<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Ë™ûÂΩô„Çø„Ç§„É†„Ç¢„Çø„ÉÉ„ÇØ</title>

  <!-- PWA -->
  <link rel="manifest" href="./manifest.webmanifest">
  <meta name="theme-color" content="#0b1020">
  <meta name="mobile-web-app-capable" content="yes">

  <!-- iOSÔºàSafari„ÅØ‚Äú„Ç§„É≥„Çπ„Éà„Éº„É´„Éú„Çø„É≥‚Äù„ÅåÂá∫„Å™„ÅÑÔºö„Éõ„Éº„É†ÁîªÈù¢„Å´ËøΩÂä†Ôºâ -->
  <link rel="apple-touch-icon" href="./icons/icon-192.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <style>
    :root{
      --bg:#0b1020;
      --card:#121a33;
      --ink:#eaf0ff;
      --muted:#b8c3e6;
      --accent:#ff3b30;
      --ok:#00d38a;
      --ng:#ff4d7d;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", sans-serif;
      background: #0b1020;
      color: var(--ink);
    }
    .hidden{ display:none !important; }
    .wrap{ max-width:900px; margin:0 auto; padding:10px; }

    /* ===== START ===== */
    #startPane{
      min-height:100vh;
      background:
        linear-gradient(rgba(0,0,0,.40), rgba(0,0,0,.55)),
        url("./icons/start-bg.jpg") center/cover no-repeat;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:16px;
    }
    .startCard{
      width:min(520px, 100%);
      background: rgba(11,16,32,.72);
      border:1px solid rgba(255,255,255,.12);
      border-radius:18px;
      padding:18px;
      backdrop-filter: blur(8px);
      box-shadow: 0 18px 50px rgba(0,0,0,.35);
      text-align:center;
    }
    .title{
      font-size:28px;
      font-weight:900;
      letter-spacing:.03em;
      margin:6px 0 8px;
      text-shadow: 0 8px 30px rgba(0,0,0,.55);
    }
    .sub{
      color: var(--muted);
      font-size:13px;
      line-height:1.45;
      margin:0 0 12px;
    }
    .btn{
      border:none;
      border-radius:999px;
      padding:14px 22px;
      font-weight:900;
      font-size:18px;
      cursor:pointer;
      color:#fff;
      background: var(--accent);
      box-shadow: 0 12px 30px rgba(255,59,48,.25);
    }
    .btn:active{ transform: scale(.98); }
    .btn2{
      border:none;
      border-radius:12px;
      padding:10px 14px;
      font-weight:800;
      cursor:pointer;
      background: rgba(255,255,255,.10);
      color: var(--ink);
    }
    .btn2:active{ transform: scale(.99); }

    /* ===== BATTLE ===== */
    #battlePane{ background: var(--bg); }
    .hud{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin:10px 0 8px;
    }
    .stat{
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.10);
      border-radius:14px;
      padding:10px 12px;
      font-weight:800;
    }
    .stat b{ font-size:18px; }
    #q{
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.10);
      border-radius:16px;
      padding:14px;
      margin-top:8px;
    }
    #q h3{ margin:0 0 6px; font-size:22px; }
    .prompt{ color: var(--muted); font-size:13px; }

    /* ÈÅ∏ÊäûËÇ¢ 2√ó2 */
    #choices{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
      margin-top:12px;
    }
    #choices button{
      border:none;
      border-radius:16px;
      padding:16px 12px;
      min-height:78px;
      font-size:16px;
      font-weight:900;
      color: var(--ink);
      background: rgba(255,255,255,.10);
      border:1px solid rgba(255,255,255,.12);
      box-shadow: 0 10px 24px rgba(0,0,0,.22);
      cursor:pointer;
      text-align:left;
      line-height:1.2;
    }
    #choices button:active{ transform: scale(.98); }

    .row{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      margin-top:10px;
    }

    /* ===== RESULT ===== */
    #resultPane{
      padding:12px 10px 22px;
    }
    .resultCard{
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.10);
      border-radius:18px;
      padding:14px;
      box-shadow: 0 18px 50px rgba(0,0,0,.25);
    }
    .resultBig{
      text-align:center;
      font-size:28px;
      font-weight:900;
      margin:6px 0 8px;
    }
    .resultLine{
      text-align:center;
      color: var(--muted);
      margin:6px 0;
      font-weight:800;
    }
    .resultLine b{ color: var(--ink); font-size:22px; }

    /* ===== RANKING ===== */
    #rankBox{ padding:10px; }
    .sectionTitle{
      font-size:18px;
      font-weight:900;
      margin:10px 0 8px;
    }
    .card{
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.10);
      border-radius:18px;
      padding:12px;
      margin-top:10px;
    }
    .muted{ color: var(--muted); font-size:12px; }
    select{
      padding:10px 12px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.08);
      color: var(--ink);
      font-weight:800;
      min-width: 160px;
      outline:none;
    }
    ol{ margin:8px 0 0 18px; padding:0; }
    ol li{ margin:6px 0; }

    /* ===== OVERLAYÔºà321 / ‚óã√óÔºâ===== */
    #overlay{
      position:fixed;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      background: rgba(0,0,0,.35);
      z-index:9999;
    }
    #overlay .panel{
      width:min(520px, 92vw);
      text-align:center;
      font-weight:1000;
      letter-spacing:.02em;
      border-radius:22px;
      padding:24px 18px;
      background: rgba(10, 16, 36, .82);
      border:1px solid rgba(255,255,255,.18);
      box-shadow: 0 28px 80px rgba(0,0,0,.45);
      text-shadow: 0 14px 40px rgba(0,0,0,.55);
      font-size:78px;
      line-height:1;
      transform: translateY(-6px);
    }
    #overlay .panel.count{ animation: pop .18s ease-out; }
    #overlay .panel.go{ color: var(--ok); animation: pop .18s ease-out; }
    #overlay .panel.ok{ color: var(--ok); font-size:90px; animation: pop .14s ease-out; }
    #overlay .panel.ng{ color: var(--ng); font-size:90px; animation: shake .28s ease-in-out; }
    @keyframes pop{
      from{ transform: translateY(-6px) scale(.92); opacity:.3; }
      to{ transform: translateY(-6px) scale(1); opacity:1; }
    }
    @keyframes shake{
      0%,100%{ transform: translateY(-6px) translateX(0); }
      25%{ transform: translateY(-6px) translateX(-10px); }
      50%{ transform: translateY(-6px) translateX(10px); }
      75%{ transform: translateY(-6px) translateX(-6px); }
    }
  </style>
</head>

<body>

  <!-- START -->
  <div id="startPane">
    <div class="startCard">
      <div class="title">Ë™ûÂΩô„Çø„Ç§„É†„Ç¢„Çø„ÉÉ„ÇØ</div>
      <p class="sub">30Áßí„Åß‰ΩïÂïèÊ≠£Ëß£„Åß„Åç„Çã„ÅãÂãùË≤†ÔºÅ<br>ÔºàÂÖàÁîü„ÉÜ„Çπ„ÉàÈÖçÂ∏É„É¢„Éº„ÉâÔºö‰ªä„ÅØ„É≠„Ç∞„Ç§„É≥ÁÑ°„Åó„Åß„ÇÇÈÅä„Åπ„Åæ„ÅôÔºâ</p>
      <button id="startBtn" class="btn">‚ñ∂ START</button>
      <div class="muted" style="margin-top:10px;">‚ÄªiPhone„ÅØÂÖ±Êúâ‚Üí„Äå„Éõ„Éº„É†ÁîªÈù¢„Å´ËøΩÂä†„Äç</div>
    </div>
  </div>

  <!-- BATTLE -->
  <div id="battlePane" class="hidden">
    <div class="wrap">
      <div class="hud">
        <div class="stat">ÊÆã„Çä <b id="timeLeft">30</b> Áßí</div>
        <div class="stat">„Çπ„Ç≥„Ç¢ <b id="scoreNow">0</b></div>
        <div class="stat">COMBO <b id="comboNow">0</b></div>
      </div>

      <div id="q"></div>
      <div id="choices"></div>

      <div class="row">
        <button id="stopBtn" class="btn2">ÁµÇ‰∫Ü</button>
      </div>
    </div>
  </div>

  <!-- RESULT -->
  <div id="resultPane" class="hidden">
    <div class="wrap">
      <div class="resultCard">
        <div class="resultBig">üéâ ÁµêÊûú</div>
        <div class="resultLine">„Çπ„Ç≥„Ç¢Ôºö<b id="finalScore">0</b> ÁÇπ</div>
        <div class="resultLine">ÊúÄÂ§ßCOMBOÔºö<b id="finalCombo">0</b></div>
      </div>

      <div class="row">
        <button id="retryBtn" class="btn">„ÇÇ„ÅÜ‰∏ÄÂõûÔºÅ</button>
        <button id="goRankBtn" class="btn2">„É©„É≥„Ç≠„É≥„Ç∞„ÇíË¶ã„Çã</button>
      </div>

     <!-- „É©„É≥„Ç≠„É≥„Ç∞ -->
<section id="rankingPane" style="margin-top:14px;">
  <h3>„É©„É≥„Ç≠„É≥„Ç∞ÔºàÂÖàÁîü„ÉÜ„Çπ„ÉàÁî®ÔºöÁ´ØÊú´ÂÜÖÔºâ</h3>

  <div style="display:flex; gap:10px; align-items:center; margin:10px 0;">
    <label for="weekSelect">ÈÄ±Ôºö</label>
    <select id="weekSelect" style="flex:1; min-width:160px;"></select>
    <button id="rankRefreshBtn">Êõ¥Êñ∞</button>
  </div>

  <div class="card">
    <h4>ÈÄ±Top10ÔºàÂÄã‰∫∫Ôºâ</h4>
    <div id="weeklyTop"></div>
  </div>

  <div class="card" style="margin-top:12px;">
    <h4>„ÅÇ„Å™„Åü„ÅÆÈ†Ü‰Ωç</h4>
    <div id="myRank"></div>
  </div>

  <div id="rankMsg" style="margin-top:10px; opacity:.8;"></div>
</section>


  <!-- OVERLAYÔºà321 / ‚óã√óÔºâ -->
  <div id="overlay" class="hidden"><div class="panel"></div></div>

  <!-- JSÔºàÈ†ÜÁï™Âé≥ÂÆàÔºâ -->
  <script src="./js/config.js"></script>
  <script src="./js/api.js"></script>
  <script src="./js/ranking.js"></script>
  <script src="./js/quiz.js"></script>
  <script src="./js/main.js"></script>

  <!-- SWÁôªÈå≤ -->
  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("./sw.js");
    }
  </script>

</body>
</html>

